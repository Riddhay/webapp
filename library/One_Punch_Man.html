<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/book1.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.7.1/jszip.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400..900;1,400..900&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
    <title>One-Punch Man - Chapter List</title>

</head>
<body>
      <header>
            <a href="/">
        <div class="wordmark">Manga<span>Library</span></div>
    </header> </a>
    <div class="container">
        <div class="main-layout">
            <!-- Left sidebar/info section -->
            <div class="sidebar">
                <img src="https://d28hgpri8am2if.cloudfront.net/book_images/onix/cvr9781974752508/one-punch-man-vol-30-9781974752508_hr.jpg" alt="Vinland Saga Book Cover" class="cover-image">
                <div class="info-section">
                    <p><strong>Author(s):</strong> MURATA Yuusuke, ONE</p>
                    <p><strong>Tags(s):</strong> Action, Adventure, Comedy, Drama, Sci-fi, Seinen, Supernatural</p>
                    <p><strong>Type:</strong> Manga</p>
                    <p><strong>Status:</strong> Ongoing</p>
                    <p><strong>Released:</strong> 2012</p>
                    <p><strong>Official Translation:</strong> Yes</p>
                    <p><strong>Anime Adaptation:</strong> Yes</p>
                    <p><strong>Adult Content:</strong> No</p>
                </div>
            </div>

            <!-- Right main content section -->
            <div class="main-content">
                <!-- Title and call to action -->
                <div class="header-container">
                    <h1 class="header-title">One-Punch Man</h1>
                    <div class="button-group">
                        <button class="button blue">28,498</button>
                        <button class="button red">Subscribe</button>
                    </div>
                </div>

                <!-- Description section -->
                <div class="description-box">
                    <p>
                        In this new action-comedy, everything about a young man named Saitama screams "AVERAGE," from his lifeless expression to his bald head, to his unimpressive physique. However, this average-looking fellow doesn't have your average problem... He's actually a superhero that's looking for tough opponents! The problem is, every time he finds a promising candidate he beats the snot out of them in one punch. Can Saitama finally find an evil villain strong enough to challenge him? Follow Saitama through his hilarious romps as he searches for new bad guys to challenge!
                    </p>
                </div>

                <!-- Chapter list section -->
                <div class="chapter-list">



                    <!-- Example chapter item -->
                    
                    <!-- More chapter items -->
                    
                    <div class="chapter-item">
                        <div class="chapter-title">
                            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                            <span>Chapter 5</span>
                        </div>
                        <span class="chapter-date">Sep 8, 2024</span>
                        
                    </div>
                    <div class="chapter-item">
                        <div class="chapter-title">
                            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                            <span>Chapter 4</span>
                        </div>
                        <span class="chapter-date">Sep 8, 2024</span>
                    </div>
                    <div class="chapter-item">
                        <div class="chapter-title">
                            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                            <span>Chapter 3</span>
                        </div>
                        <span class="chapter-date">Sep 8, 2024</span>
                    </div>
                    <div class="chapter-item">
                        <div class="chapter-title">
                            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                            <span>Chapter 2</span>
                        </div>
                        <span class="chapter-date">Sep 8, 2024</span>
                    </div>

                    <div class="chapter-item">
                        <div class="chapter-title">
                            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                            <span>Chapter 1</span>
                        </div>
                        <span class="chapter-date">Sep 8, 2024</span>
                </div>

                


                <!-- Support by shopping section -->
                <div class="shopping-section">
                    <div class="shopping-header">
                        <svg fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M10 2a8 8 0 100 16A8 8 0 0010 2zm1 12a1 1 0 11-2 0 1 1 0 012 0zm0-7a1 1 0 10-2 0v4a1 1 0 102 0V9z" clip-rule="evenodd"></path></svg>
                        <h2>Check out our other Manga</h2>
                    </div>
                    <div class="shopping-grid">
                        <a href="/library/Chainsaw_Man.html" class="shopping-item">
                            <img class="shopping-image" src="https://www.shumishop.com.au/cdn/shop/products/chainsaw-man-vol-7-9781974720965_xlg.jpg?v=1652410949" alt="Chainsaw_Man">
                        </a>
                        
                        </a>
                        <a href="/library/Jujutsu_Kaisen.html" class="shopping-item">
                            <img class="shopping-image" src="https://comicvine.gamespot.com/a/uploads/scale_small/11158/111586527/9577297-30.jpg" alt="Jujutsu Kaisen Merchandise">
                        </a>
                        <a href="/library/Vinland_Saga.html" class="shopping-item">
                            <img class="shopping-image" src="https://m.media-amazon.com/images/I/91+Qs9DaFZL._UF1000,1000_QL80_.jpg" alt="Vinland_Saga">
                        </a>
                        <a href="Attack_On_Titan.html" class="shopping-item">
                            <img class="shopping-image" src="https://m.media-amazon.com/images/I/71NdNnKe8AL.jpg" alt="Attack_On_Titan">
                    </div>
                </div>
            </div>
        </div>
    </div>


<div id="reader-overlay" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background-color:black; z-index:9999; overflow:auto;">
    <button id="back-button" style="position:fixed; top:20px; left:20px; z-index:10000; padding:10px 20px; background:#e53e3e; color:white; border:none; border-radius:5px; cursor:pointer;">Back</button>
    <div id="reader-content" style="margin-top:60px; display:flex; flex-direction:column; align-items:center; gap:20px;">
   <div class="reader-text" style="color:white; opacity:0.7; font-size:1.5rem; font-weight:bold;">Manga<span>Library</span></div>
 </div>
</div>


</body>


<script>
document.querySelectorAll('.chapter-item').forEach((item, index) => {
    item.addEventListener('click', () => {
        const chapterNumber = 5 - index; // Reverse order matching from HTML
        const filePath = `/assets/One_Punch_Man/Official_Chapter_${chapterNumber}.cbz`;
        openCBZ(filePath);
    });
});

document.getElementById('back-button').addEventListener('click', () => {
    document.getElementById('reader-overlay').style.display = 'none';
    const readerContent = document.getElementById('reader-content');
    // Revoke object URLs to free up memory
    Array.from(readerContent.children).forEach(img => {
        URL.revokeObjectURL(img.src);
    });
    readerContent.innerHTML = '';
    document.body.style.overflow = 'auto';
});

async function openCBZ(filePath) {
    const overlay = document.getElementById('reader-overlay');
    const container = document.getElementById('reader-content');
    document.body.style.overflow = 'hidden';

    const loadingIndicator = document.createElement('p');
    loadingIndicator.textContent = 'Loading...';
    loadingIndicator.style.color = 'white';
    container.appendChild(loadingIndicator);
    overlay.style.display = 'block';

    try {
        const response = await fetch(filePath);
        const blob = await response.blob();
        const zip = await JSZip.loadAsync(blob);
        container.innerHTML = ''; // Clear loading message

        const imageFiles = [];
        zip.forEach((relativePath, file) => {
            if (!file.dir && /\.(jpe?g|png|webp)$/i.test(file.name)) {
                imageFiles.push(file);
            }
        });

        imageFiles.sort((a, b) => a.name.localeCompare(b.name));

        for (const imageFile of imageFiles) {
            const imageBlob = await imageFile.async("blob");
            const imageUrl = URL.createObjectURL(imageBlob);
            const img = document.createElement('img');
            img.src = imageUrl;
            img.style.width = '100%';
            img.style.maxWidth = '900px';
            container.appendChild(img);
        }

    } catch (error) {
        console.error('Failed to open CBZ:', error);
        container.innerHTML = '<p style="color:white;">Failed to load chapter.</p>';
    }
}
</script>

</html> 
